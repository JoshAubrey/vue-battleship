(function(e){function t(t){for(var r,o,s=t[0],d=t[1],c=t[2],u=0,h=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&h.push(n[o][0]),n[o]=0;for(r in d)Object.prototype.hasOwnProperty.call(d,r)&&(e[r]=d[r]);l&&l(t);while(h.length)h.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],r=!0,s=1;s<a.length;s++){var d=a[s];0!==n[d]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},n={app:0},i=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/vue-battleship/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var l=d;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var r=a("8a23"),n=a.n(r);n.a},"1e97":function(e,t,a){},"37eb":function(e,t,a){},3993:function(e,t,a){},"4a93":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("TheNavBar",{on:{"show-game-menu":e.handleShowGameMenu}}),a("v-content",[a("TheGame",{ref:"game",on:{round:e.handleRound}}),a("TheGameMenu",{attrs:{isOpen:e.isGameMenuOpen,options:e.gameMenuOptions},on:{"start-new-game":e.handleNewGame,"resume-game":e.handleResumeGame}}),a("TheGameBoardRedactor",{attrs:{isOpen:e.isGameBoardRedactorOpen},on:{"start-game":e.handleStartGame}})],1)],1)},i=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",[a("button",{staticClass:"menu",on:{click:function(t){return e.$emit("show-game-menu")}}},[e._v("Menu")]),a("h1",{staticClass:"logo"},[e._v("Battleship")]),a("button",{staticClass:"github-icon",on:{click:e.handleOpenRepo}},[a("v-icon",{attrs:{large:""}},[e._v("mdi-github-circle")])],1)])},s=[],d={name:"TheNavBar",methods:{handleOpenRepo:function(){window.open("https://github.com/JoshAubrey/vue-battleship","_blank")}}},c=d,l=(a("fcfe"),a("2877")),u=a("6544"),h=a.n(u),p=a("132d"),f=Object(l["a"])(c,o,s,!1,null,"936a8988",null),y=f.exports;h()(f,{VIcon:p["a"]});var m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{persistent:"","overlay-opacity":"0.8"},model:{value:e.isOpen,callback:function(t){e.isOpen=t},expression:"isOpen"}},[a("div",{staticClass:"menu-container"},[a("button",{staticClass:"btn",on:{click:function(t){return e.$emit("start-new-game")}}},[e._v(" New Game ")]),a("button",{staticClass:"btn",class:{disable:e.options.resume.isDisabled},on:{click:function(t){return e.$emit("resume-game")}}},[e._v(" Resume ")]),a("button",{staticClass:"btn source",on:{click:e.handleOpenRepo}},[e._v(" Source Code ")]),a("p",{staticClass:"author"},[e._v("Made by Josh")])])])},x=[],g={name:"TheGameMenu",props:{isOpen:Boolean,options:Object},methods:{handleOpenRepo:function(){window.open("https://github.com/JoshAubrey/vue-battleship","_blank")}}},v=g,b=(a("ec1c"),a("169a")),S=Object(l["a"])(v,m,x,!1,null,"30ad5dae",null),C=S.exports;h()(S,{VDialog:b["a"]});var O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{persistent:"","overlay-opacity":"0.8"},model:{value:e.resetAndDisplay,callback:function(t){e.resetAndDisplay=t},expression:"resetAndDisplay"}},[a("div",{staticClass:"container"},[a("h2",[e._v("Arrange your board")]),a("div",{staticClass:"redactor"},[a("div",{staticClass:"board-container"},[a("div",{staticClass:"cords letters"},e._l(e.lettersCords,(function(t){return a("div",{key:t,staticClass:"letter"},[e._v(e._s(t))])})),0),a("div",{staticClass:"cords numbers"},e._l(e.numbersCords,(function(t){return a("div",{key:t,staticClass:"number"},[e._v(e._s(t))])})),0),a("div",{staticClass:"board"},e._l(Math.pow(e.MAX+1,2),(function(t,r){return a("div",{key:e.keys[e.MIN+r],staticClass:"spot",attrs:{"data-cord":e.stringifiedCords[e.MIN+r]},on:{dragover:function(t){return t.preventDefault(),e.handleDragOver(t)},dragleave:e.handleDragLeave,drop:function(t){return t.preventDefault(),e.handleDrop(t)}}})})),0)]),a("div",{staticClass:"selection"},e._l(e.ships,(function(t,r){return a("div",{key:r,staticClass:"ship-container",on:{dragstart:e.handleDragStart}},[a("span",{staticClass:"count"},[e._v(e._s(t)+"x")]),a("div",{ref:r,refInFor:!0,staticClass:"ship",attrs:{"data-length":e.getShipLength(r),"data-position":"y",draggable:"true"}},e._l(e.getShipLength(r),(function(e){return a("div",{key:e,staticClass:"part"})})),0)])})),0)]),a("div",{staticClass:"tips-container"},[a("v-icon",{staticClass:"tip-ico"},[e._v("mdi-lightbulb-on")]),a("div",{staticClass:"tips"},[a("span",[e._v("* Drag and drop the ships")]),a("span",[e._v("* Click on a ship on the board to switch direction")])])],1),a("div",{staticClass:"options"},[a("button",{on:{click:e.handleRandomPlacement}},[e._v("Random")]),a("button",{on:{click:function(t){return e.resetBoard()}}},[e._v("Reset")]),a("button",{class:{disable:0!==e.totalShips},on:{click:e.onClickStartBtn}},[e._v("Start")])])])])},B=[],w=(a("99af"),a("7db0"),a("4160"),a("a15b"),a("d81d"),a("13d5"),a("4fad"),a("ac1f"),a("466d"),a("159b"),a("2909")),E=a("5530"),k=(a("4de4"),a("c740"),a("a9e3"),a("9129"),10),j={ship4:1,ship3:2,ship2:3,ship1:4},N=9,R=0,G=function(e){var t=e.x,a=e.y,r=function(e){return R<=e&&e<=N},n=function(e){return!Number.isNaN(e)&&"number"===typeof e&&r(e)};return n(t)&&n(a)},I=function(e,t,a,r){if(r){for(var n=e.y;n<=t.y;n+=1)if("s"===a[e.x][n]||"B"===a[e.x][n])return!1;for(var i=e.y-1;i<=t.y+1;i+=1)if(G({x:e.x-1,y:i})&&"s"===a[e.x-1][i])return!1;for(var o=e.y-1;o<=t.y+1;o+=1)if(G({x:e.x+1,y:o})&&"s"===a[e.x+1][o])return!1;return(!G({x:e.x,y:e.y-1})||"s"!==a[e.x][e.y-1])&&(!G({x:e.x,y:t.y+1})||"s"!==a[e.x][t.y+1])}for(var s=e.x;s<=t.x;s+=1)if("s"===a[s][e.y]||"B"===a[s][e.y])return!1;for(var d=e.x-1;d<=t.x+1;d+=1)if(G({x:d,y:e.y-1})&&"s"===a[d][e.y-1])return!1;for(var c=e.x+1;c<=t.x+1;c+=1)if(G({x:c,y:e.y+1})&&"s"===a[c][e.y+1])return!1;return(!G({x:e.x-1,y:e.y})||"s"!==a[e.x-1][e.y])&&(!G({x:e.x+1,y:e.y})||"s"!==a[e.x+1][e.y])},T=function(e,t,a){var r=a.x,n=a.y,i=a.isVertical;if(e&&G({x:r,y:n})){var o={x:r,y:n},s=i?{x:r,y:n+e.getLength()-1}:{x:r+e.getLength()-1,y:n};return G(s)&&I(o,s,t,i)}return!1},L=function(e,t){var a=t.x,r=t.y,n=t.isVertical,i=[],o={x:a,y:r};if(n){for(var s={x:a,y:r+e.getLength()-1},d=o.y;d<=s.y;d+=1)i.push({x:o.x,y:d});return i}for(var c={x:a+e.getLength()-1,y:r},l=o.x;l<=c.x;l+=1)i.push({x:l,y:o.y});return i},M=function(e,t){var a="ship".concat(e.getLength());return t[a]+1<=j[a]},A=function(e,t){var a=Object(E["a"])({},t);return a["ship".concat(e.getLength())]+=1,Object(E["a"])({},a)},_=function(e,t){var a=Object(E["a"])({},t);return a["ship".concat(e.getLength())]-=1,Object(E["a"])({},a)},D=function(e,t,a){var r=a.x,n=a.y,i=a.isVertical,o={x:r,y:n},s=JSON.parse(JSON.stringify(t));if(i){for(var d={x:r,y:n+e.getLength()-1},c=o.y;c<=d.y;c+=1)s[o.x][c]="s";for(var l=o.y-1;l<=d.y+1;l+=1)G({x:o.x-1,y:l})&&(s[o.x-1][l]="B");for(var u=o.y-1;u<=d.y+1;u+=1)G({x:o.x+1,y:u})&&(s[o.x+1][u]="B");return G({x:o.x,y:o.y-1})&&(s[o.x][o.y-1]="B"),G({x:o.x,y:d.y+1})&&(s[o.x][d.y+1]="B"),s}for(var h={x:r+e.getLength()-1,y:n},p=o.x;p<=h.x;p+=1)s[p][o.y]="s";for(var f=o.x-1;f<=h.x+1;f+=1)G({x:f,y:o.y-1})&&(s[f][o.y-1]="B");for(var y=o.x-1;y<=h.x+1;y+=1)G({x:y,y:o.y+1})&&(s[y][o.y+1]="B");return G({x:o.x-1,y:o.y})&&(s[o.x-1][o.y]="B"),G({x:h.x+1,y:o.y})&&(s[h.x+1][o.y]="B"),s},J=function(e,t){var a=t.x,r=t.y;return!(!G({x:a-1,y:r})||"s"!==e[a-1][r])||(!(!G({x:a+1,y:r})||"s"!==e[a+1][r])||(!(!G({x:a,y:r-1})||"s"!==e[a][r-1])||(!(!G({x:a-1,y:r-1})||"s"!==e[a-1][r-1])||(!(!G({x:a+1,y:r-1})||"s"!==e[a+1][r-1])||(!(!G({x:a,y:r+1})||"s"!==e[a][r+1])||(!(!G({x:a-1,y:r+1})||"s"!==e[a-1][r+1])||!(!G({x:a+1,y:r+1})||"s"!==e[a+1][r+1])))))))},P=function(e,t){var a=e.ship,r=e.isVertical,n=e.cords[0],i=n.x,o=n.y,s={x:i,y:o},d=JSON.parse(JSON.stringify(t));if(r){for(var c={x:i,y:o+a.getLength()-1},l=s.y;l<=c.y;l+=1)d[s.x][l]="~";for(var u=s.y-1;u<=c.y+1;u+=1)G({x:s.x-1,y:u})&&(J(d,{x:s.x-1,y:u})||(d[s.x-1][u]="~"));for(var h=s.y-1;h<=c.y+1;h+=1)G({x:s.x+1,y:h})&&(J(d,{x:s.x+1,y:h})||(d[s.x+1][h]="~"));return G({x:s.x,y:s.y-1})&&(J(d,{x:s.x,y:s.y-1})||(d[s.x][s.y-1]="~")),G({x:s.x,y:c.y+1})&&(J(d,{x:s.x,y:c.y+1})||(d[s.x][c.y+1]="~")),d}for(var p={x:i+a.getLength()-1,y:o},f=s.x;f<=p.x;f+=1)d[f][s.y]="~";for(var y=s.x-1;y<=p.x+1;y+=1)G({x:y,y:s.y-1})&&(J(d,{x:y,y:s.y-1})||(d[y][s.y-1]="~"));for(var m=s.x-1;m<=p.x+1;m+=1)G({x:m,y:s.y+1})&&(J(d,{x:m,y:s.y+1})||(d[m][s.y+1]="~"));return G({x:s.x-1,y:s.y})&&(J(d,{x:s.x-1,y:s.y})||(d[s.x-1][s.y]="~")),G({x:p.x+1,y:s.y})&&(J(d,{x:p.x+1,y:s.y})||(d[p.x+1][s.y]="~")),d},V=function(e,t){var a=e.ship,r=e.isVertical,n=e.cords[0],i=n.x,o=n.y,s={x:i,y:o},d=JSON.parse(JSON.stringify(t)),c=[];if(r){for(var l={x:i,y:o+a.getLength()-1},u=s.y-1;u<=l.y+1;u+=1)G({x:s.x-1,y:u})&&(d[s.x-1][u]="*",c.push({x:s.x-1,y:u}));for(var h=s.y-1;h<=l.y+1;h+=1)G({x:s.x+1,y:h})&&(d[s.x+1][h]="*",c.push({x:s.x+1,y:h}));return G({x:s.x,y:s.y-1})&&(d[s.x][s.y-1]="*",c.push({x:s.x,y:s.y-1})),G({x:s.x,y:l.y+1})&&(d[s.x][l.y+1]="*",c.push({x:s.x,y:l.y+1})),{newBoard:d,clearedBorders:c}}for(var p={x:i+a.getLength()-1,y:o},f=s.x-1;f<=p.x+1;f+=1)G({x:f,y:s.y-1})&&(d[f][s.y-1]="*",c.push({x:f,y:s.y-1}));for(var y=s.x-1;y<=p.x+1;y+=1)G({x:y,y:s.y+1})&&(d[y][s.y+1]="*",c.push({x:y,y:s.y+1}));return G({x:s.x-1,y:s.y})&&(d[s.x-1][s.y]="*",c.push({x:s.x-1,y:s.y})),G({x:p.x+1,y:s.y})&&(d[p.x+1][s.y]="*",c.push({x:p.x+1,y:s.y})),{newBoard:d,clearedBorders:c}},$=function(){return Math.floor(Math.random()*(N+1))},q=function(){return!!Math.floor(2*Math.random())},H=function(e,t){var a=t.x,r=t.y;return e.find((function(e){return e.cords.find((function(e){return e.x===a&&e.y===r}))}))},F=function(e,t){var a=t.x,r=t.y;return e.cords.findIndex((function(e){return e.x===a&&e.y===r}))},z=function(e,t){var a=t.x,r=t.y;return e.filter((function(e){return!e.cords.find((function(e){return e.x===a&&e.y===r}))}))},X=function(){var e=[["~","~","~","~","~","~","~","~","~","~"],["~","~","~","~","~","~","~","~","~","~"],["~","~","~","~","~","~","~","~","~","~"],["~","~","~","~","~","~","~","~","~","~"],["~","~","~","~","~","~","~","~","~","~"],["~","~","~","~","~","~","~","~","~","~"],["~","~","~","~","~","~","~","~","~","~"],["~","~","~","~","~","~","~","~","~","~"],["~","~","~","~","~","~","~","~","~","~"],["~","~","~","~","~","~","~","~","~","~"]],t=!1,a=0,r=0,n=[],i={ship4:0,ship3:0,ship2:0,ship1:0};return{isReady:function(){return a===k&&t},setBoardToReady:function(){return a===k&&(t=!0),this},isAllShipsSunk:function(){return!!this.isReady()&&a===r},getAliveShipsCount:function(){return a-r},placeShipAt:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.x,s=void 0===o?-1:o,d=r.y,c=void 0===d?-1:d,l=r.isVertical,u=void 0!==l&&l;if(!this.isReady()&&T(t,e,{x:s,y:c,isVertical:u})&&M(t,i)){i=A(t,i);var h=L(t,{x:s,y:c,isVertical:u});return n.push({ship:t,cords:h,isVertical:u}),e=D(t,e,{x:s,y:c,isVertical:u}),a+=1,!0}return!1},replaceShipFrom:function(t){var r=t.cx,o=void 0===r?-1:r,s=t.cy,d=void 0===s?-1:s,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=c.nx,u=void 0===l?-1:l,h=c.ny,p=void 0===h?-1:h,f=c.isVertical,y=void 0!==f&&f;if(!this.isReady()){var m=H(n,{x:o,y:d});if(m){var x=JSON.parse(JSON.stringify(e)),g=Object(w["a"])(n),v=Object(E["a"])({},i);return e=P(m,e),n=z(n,{x:o,y:d}),i=_(m.ship,i),a-=1,!!this.placeShipAt(m.ship,{x:u,y:p,isVertical:y})||(e=x,n=g,i=v,a+=1,!1)}}return!1},placeShipRandom:function(e){if(!M(e,i))return!1;var t,a,r;do{t=$(),a=$(),r=q()}while(!this.placeShipAt(e,{x:t,y:a,isVertical:r}));return{x:t,y:a,isVertical:r}},receiveAttack:function(t){var a=t.x,i=t.y;if(this.isReady()&&G({x:a,y:i})){if("s"===e[a][i]){var o=H(n,{x:a,y:i}),s=F(o,{x:a,y:i});if(o.ship.hitAt({position:s+1}).isSunk()){r+=1,e[a][i]="x";var d=V(o,e),c=d.newBoard,l=d.clearedBorders;return e=c,{damagedShipData:o,clearedBorders:l}}return e[a][i]="x",!0}return"*"===e[a][i]||"x"===e[a][i]?"*":(e[a][i]="*",!1)}return!1}}},W=X,Y=4,K=1,Q=function(e){return e>Y?Y:e<K?K:e},U=function(e){return K<=e&&e<=Y},Z=function(e){var t=e.length,a=[],r=Q(t);return{getLength:function(){return r},getLives:function(){return[].concat(a)},isSunk:function(){return a.join("").length===r},hitAt:function(e){var t=e.position;return U(t)&&(a[t-1]="x"),this}}},ee=Z,te={name:"TheGameBoardRedactor",props:{isOpen:Boolean},data:function(){return{MAX:N,MIN:R,ships:Object(E["a"])({},j),board:W(),draggedShip:null}},computed:{resetAndDisplay:function(){return this.isOpen&&this.resetBoard(),this.isOpen},cords:function(){for(var e=[],t=this.MIN;t<=this.MAX;t+=1)for(var a=this.MIN;a<=this.MAX;a+=1)e.push({x:a,y:t});return e},keys:function(){return this.cords.map((function(e,t){return"".concat(JSON.stringify(e),"-").concat(t)}))},stringifiedCords:function(){return this.cords.map((function(e){return JSON.stringify(e)}))},lettersCords:function(){for(var e=[],t=this.MIN;t<=this.MAX;t+=1)e.push(String.fromCharCode(65+t));return e},numbersCords:function(){for(var e=[],t=this.MIN+1;t<=this.MAX+1;t+=1)e.push(t);return e},totalShips:function(){return Object.entries(this.ships).reduce((function(e,t){return e+t[1]}),0)}},methods:{onClickStartBtn:function(){var e=document.querySelector(".board-container").cloneNode(!0),t=e.querySelectorAll(".ship");t.forEach((function(e){e.removeAttribute("draggable");var t="x"===e.dataset.position,a=JSON.parse(e.parentElement.dataset.cord),r=a.x,n=a.y;e.querySelectorAll(".part").forEach((function(e,a){var i=t?{x:r,y:n+a}:{x:r+a,y:n};e.dataset.cord=JSON.stringify(i)}))})),this.board.setBoardToReady();var a=Object(E["a"])({},this.board);this.resetBoard();var r=document.querySelector(".board-container").cloneNode(!0);this.board.placeShipRandom(ee({length:4})),this.board.placeShipRandom(ee({length:3})),this.board.placeShipRandom(ee({length:3})),this.board.placeShipRandom(ee({length:2})),this.board.placeShipRandom(ee({length:2})),this.board.placeShipRandom(ee({length:2})),this.board.placeShipRandom(ee({length:1})),this.board.placeShipRandom(ee({length:1})),this.board.placeShipRandom(ee({length:1})),this.board.placeShipRandom(ee({length:1})),this.board.setBoardToReady();var n=Object(E["a"])({},this.board);this.$emit("start-game",a,e,n,r)},getShipLength:function(e){return+e.match(/\d/g).join("")},resetBoard:function(){document.querySelectorAll(".spot > .ship").forEach((function(e){return e.remove()})),this.board=W(),this.ships=Object(E["a"])({},j)},handleChangePosition:function(e){var t=e.currentTarget,a=JSON.parse(t.dataset.cord),r="x"===t.dataset.position;if(this.board.replaceShipFrom({cx:a.x,cy:a.y},{nx:a.x,ny:a.y,isVertical:!r})){var n="x"===t.dataset.position?"y":"x";t.dataset.position=n,t.style["grid-auto-flow"]="x"===n?"row":"column"}},handleShipInitialCord:function(e){var t=JSON.parse(e.currentTarget.dataset.cord),a=e.currentTarget.dataset.position;e.dataTransfer.setData("text/plain",JSON.stringify({cord:t,cloned:!0,position:a})),this.draggedShip=e.currentTarget},handleDragStart:function(e){var t=e.target.dataset.position,a=+e.target.dataset.length;e.dataTransfer.setData("text/plain",JSON.stringify({length:a,position:t}))},handleDragOver:function(e){e.target.classList.add("over")},handleDragLeave:function(e){e.target.classList.remove("over")},handleDrop:function(e){var t,a;e.target.classList.remove("over");try{a=JSON.parse(e.dataTransfer.getData("text/plain")),JSON.parse(e.target.dataset.cord),t=!0}catch(y){t=!1}if(t&&a)if(a.cloned){var r=JSON.parse(e.target.dataset.cord),n=a,i=n.cord,o=n.position,s="x"===o;this.board.replaceShipFrom({cx:i.x,cy:i.y},{nx:r.x,ny:r.y,isVertical:s})&&(this.draggedShip.dataset.cord=e.target.dataset.cord,e.target.appendChild(this.draggedShip),this.draggedShip=null)}else{var d=a,c=d.length,l=d.position,u=JSON.parse(e.target.dataset.cord),h="x"===l;if(this.board.placeShipAt(ee({length:c}),Object(E["a"])(Object(E["a"])({},u),{},{isVertical:h}))){var p="ship".concat(c),f=this.$refs[p][0].cloneNode(!0);f.dataset.cord=e.target.dataset.cord,f.dataset.position=l,this.ships[p]-=1,f.style.position="absolute",e.target.appendChild(f),f.addEventListener("dragstart",this.handleShipInitialCord),f.addEventListener("click",this.handleChangePosition)}}},handleRandomPlacement:function(){var e=this,t=function(t,a){var r=t.x,n=t.y,i=t.isVertical,o="ship".concat(a),s=e.$refs[o][0].cloneNode(!0);s.dataset.cord=JSON.stringify({x:r,y:n}),s.dataset.position=i?"x":"y",e.ships[o]-=1,s.style.position="absolute",s.style["grid-auto-flow"]=i?"row":"column",Object(w["a"])(document.querySelectorAll(".spot")).find((function(e){return e.dataset.cord===JSON.stringify({x:r,y:n})})).appendChild(s),s.addEventListener("dragstart",e.handleShipInitialCord),s.addEventListener("click",e.handleChangePosition)};this.resetBoard(),t(Object(E["a"])({},this.board.placeShipRandom(ee({length:4}))),4),t(Object(E["a"])({},this.board.placeShipRandom(ee({length:3}))),3),t(Object(E["a"])({},this.board.placeShipRandom(ee({length:3}))),3),t(Object(E["a"])({},this.board.placeShipRandom(ee({length:2}))),2),t(Object(E["a"])({},this.board.placeShipRandom(ee({length:2}))),2),t(Object(E["a"])({},this.board.placeShipRandom(ee({length:2}))),2),t(Object(E["a"])({},this.board.placeShipRandom(ee({length:1}))),1),t(Object(E["a"])({},this.board.placeShipRandom(ee({length:1}))),1),t(Object(E["a"])({},this.board.placeShipRandom(ee({length:1}))),1),t(Object(E["a"])({},this.board.placeShipRandom(ee({length:1}))),1)}}},ae=te,re=(a("a605"),Object(l["a"])(ae,O,B,!1,null,"e4359514",null)),ne=re.exports;h()(re,{VDialog:b["a"],VIcon:p["a"]});var ie=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},oe=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"game-wrapper"},[a("div",{staticClass:"game-container"},[a("div",{staticClass:"pl"}),a("div",{staticClass:"game-info"}),a("div",{staticClass:"pc"})])])}],se={name:"TheGame",data:function(){return{isGameInitiated:!1,plElement:null,pcElement:null,plBoardElement:null,pcBoardElement:null,plBoardInfoElement:null,pcBoardInfoElement:null,gameInfo:null,pl:null,pc:null}},methods:{initTheGame:function(e,t,a,r){this.plElement=document.querySelector(".pl"),this.pcElement=document.querySelector(".pc"),this.gameInfo=document.querySelector(".game-info"),this.plBoardElement=e,this.pcBoardElement=t,this.pl=a,this.pc=r,this.renderTheBoards(),this.renderTheBoardsInfo(),this.updateTheBoardsInfo(),this.updateGameInfo("Your Turn!"),this.addPcBoardEvent(),this.isGameInitiated=!0},renderTheBoards:function(){this.plElement.appendChild(this.plBoardElement),this.pcElement.appendChild(this.pcBoardElement)},resetTheGame:function(){this.isGameInitiated&&(this.updateGameInfo(""),this.plBoardElement.remove(),this.pcBoardElement.remove(),this.plBoardInfoElement.remove(),this.pcBoardInfoElement.remove())},addPcBoardEvent:function(){var e=this;this.pcBoardElement.addEventListener("click",(function(t){t.target.classList.contains("spot")&&e.$emit("round",t.target.dataset.cord)}))},updatePcBoard:function(e,t){var a=this;if(!0===t){var r=this.pcBoardElement.querySelector(".spot[data-cord=".concat(JSON.stringify(e),"]"));r.append("x"),r.style.backgroundColor="rgb(248, 39, 39)",r.style.lineHeight="1",r.style.pointerEvents="none",r.classList.toggle("resize")}if(!1===t){var n=this.pcBoardElement.querySelector(".spot[data-cord=".concat(JSON.stringify(e),"]"));n.append("*"),n.style.pointerEvents="none",n.classList.toggle("resize")}if(t.damagedShipData){var i=t.damagedShipData,o=t.clearedBorders,s=document.createElement("div");s.classList.add("ship");for(var d=0;d<i.ship.getLength();d+=1){var c=document.createElement("div");c.classList.add("part"),c.append("x"),s.appendChild(c)}s.classList.toggle("resize");var l=this.pcBoardElement.querySelector(".spot[data-cord=".concat(JSON.stringify(JSON.stringify(i.cords[0])),"]"));s.style["grid-auto-flow"]=i.isVertical?"row":"column",s.style.position="absolute",l.firstChild&&l.firstChild.remove(),l.appendChild(s),o.forEach((function(e){var t=a.pcBoardElement.querySelector(".spot[data-cord=".concat(JSON.stringify(JSON.stringify(e)),"]"));t.firstChild||(t.append("*"),t.style.pointerEvents="none",t.classList.toggle("resize"))}))}},updatePlBoard:function(e,t){var a=this;if(!0===t||t.damagedShipData){var r=this.plBoardElement.querySelector(".part[data-cord=".concat(JSON.stringify(e),"]"));if(r.append("x"),r.style.backgroundColor="rgb(218, 100, 100)",r.classList.toggle("resize"),t.damagedShipData){var n=t.clearedBorders;n.forEach((function(e){var t=a.plBoardElement.querySelector(".spot[data-cord=".concat(JSON.stringify(JSON.stringify(e)),"]"));t.firstChild||(t.append("*"),t.classList.toggle("resize"))}))}}if(!1===t){var i=this.plBoardElement.querySelector(".spot[data-cord=".concat(JSON.stringify(e),"]"));i.append("*"),i.classList.toggle("resize")}},updateTheBoardsInfo:function(){var e=function(e,t){var a=t.firstElementChild,r=t.lastElementChild,n=e.getName(),i=e.getBoard().getAliveShipsCount();"".concat(a.textContent," Board")!==n&&(a.textContent="".concat(n," Board")),"Alive Ships: ".concat(r.textContent)!==i&&(r.textContent="Alive Ships: ".concat(i))};e(this.pl,this.plBoardInfoElement),e(this.pc,this.pcBoardInfoElement)},renderTheBoardsInfo:function(){var e=function(){var e=document.createElement("div"),t=document.createElement("h3"),a=document.createElement("h4");return e.classList.add("board-info"),t.classList.add("name"),a.classList.add("alive-ships"),e.appendChild(t),e.appendChild(a),e};this.plBoardInfoElement=e(),this.pcBoardInfoElement=e(),this.plElement.appendChild(this.plBoardInfoElement),this.pcElement.appendChild(this.pcBoardInfoElement)},updateGameInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rgb(43, 197, 87)";this.gameInfo.textContent=e,this.gameInfo.style.color=t,this.gameInfo.classList.contains("pulse")||(this.gameInfo.classList.add("pulse"),this.gameInfo.classList.add("top-bot-borders")),e||(this.gameInfo.classList.remove("pulse"),this.gameInfo.classList.remove("top-bot-borders"))},disablePcBoard:function(){this.pcBoardElement.style.pointerEvents="none"},enablePcBoard:function(){this.pcBoardElement.style.pointerEvents="auto"}}},de=se,ce=(a("f0e0"),Object(l["a"])(de,ie,oe,!1,null,"1e2ef4a4",null)),le=ce.exports,ue=(a("b0c0"),function(e,t){return e||t?!e&&t?"PC-Player":e:"Player"}),he=function(e){var t=e.player,a=e.x,r=e.y;return t.receiveAttack({x:a,y:r})},pe={isVertical:null,adjacentCords:null,backwardCord:null,forwardCord:null,initCord:null,damagedShipsCords:null,isBackWardFirst:null},fe=function(e){var t,a,r,n=e.player,i=function(){var e=pe.backwardCord;a=e.x,r=e.y,pe.isVertical?(r-=1,pe.damagedShipsCords.find((function(e){return e.x===a&&e.y===r}))&&(r-=1)):(a-=1,pe.damagedShipsCords.find((function(e){return e.x===a&&e.y===r}))&&(a-=1)),G({x:a,y:r})?(pe.backwardCord={x:a,y:r},t=n.receiveAttack({x:a,y:r}),!0===t&&pe.damagedShipsCords.push({x:a,y:r})):(pe.backwardCord=null,t="*"),"*"!==t&&!1!==t||(pe.backwardCord=null)},o=function(){var e=pe.forwardCord;a=e.x,r=e.y,pe.isVertical?(r+=1,pe.damagedShipsCords.find((function(e){return e.x===a&&e.y===r}))&&(r+=1)):(a+=1,pe.damagedShipsCords.find((function(e){return e.x===a&&e.y===r}))&&(a+=1)),G({x:a,y:r})?(pe.forwardCord={x:a,y:r},t=n.receiveAttack({x:a,y:r}),!0===t&&pe.damagedShipsCords.push({x:a,y:r})):(pe.forwardCord=null,t="*"),"*"!==t&&!1!==t||(pe.forwardCord=null)};do{if(pe.adjacentCords){var s=Math.floor(Math.random()*pe.adjacentCords.length),d=pe.adjacentCords[s];if(a=d.x,r=d.y,t=n.receiveAttack({x:a,y:r}),!0===t){pe.isVertical=pe.initCord.y!==r;var c=pe.initCord;pe.backwardCord=Object(E["a"])({},c),pe.forwardCord=Object(E["a"])({},c),pe.isBackWardFirst=1===Math.floor(2*Math.random()),pe.damagedShipsCords.push({x:a,y:r}),pe.adjacentCords=null}}else!pe.backwardCord||!pe.isBackWardFirst&&pe.forwardCord?!pe.forwardCord||pe.isBackWardFirst&&pe.backwardCord?(a=$(),r=$(),t=n.receiveAttack({x:a,y:r})):o():i()}while("*"===t);return!0!==t||pe.backwardCord||pe.forwardCord||pe.adjacentCords||(pe.initCord={x:a,y:r},pe.damagedShipsCords=[],pe.adjacentCords=[],pe.damagedShipsCords.push({x:a,y:r}),G({x:a-1,y:r})&&pe.adjacentCords.push({x:a-1,y:r}),G({x:a+1,y:r})&&pe.adjacentCords.push({x:a+1,y:r}),G({x:a,y:r-1})&&pe.adjacentCords.push({x:a,y:r-1}),G({x:a,y:r+1})&&pe.adjacentCords.push({x:a,y:r+1})),t.damagedShipData&&(pe.isVertical=null,pe.adjacentCords=null,pe.backwardCord=null,pe.forwardCord=null,pe.initCord=null,pe.damagedShipsCords=null,pe.isBackWardFirst=null),{attackInfo:t,cord:{x:a,y:r}}},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,a=void 0===t?"":t,r=e.board,n=e.isPc,i=void 0!==n&&n;if(!r)throw new Error("Player must have a board");if(!r.isReady())throw new Error("Player must have a board with ships");var o=ue(a,i),s=r.receiveAttack.bind(r),d=i?fe:he;return{getName:function(){return o},getBoard:function(){return Object(E["a"])({},r)},attack:d,receiveAttack:s}},me=ye,xe={name:"App",components:{TheGame:le,TheNavBar:y,TheGameMenu:C,TheGameBoardRedactor:ne},data:function(){return{isGameMenuOpen:!0,isGameBoardRedactorOpen:!1,gameMenuOptions:{resume:{isDisabled:!0}},pl:null,pc:null,plHasDamaged:!1,pcHasDamaged:!1,gameHasAwinner:!1}},methods:{hideGameMenu:function(){this.isGameMenuOpen=!1},handleShowGameMenu:function(){this.isGameMenuOpen=!0},openGameBoardRedactor:function(){this.isGameBoardRedactorOpen=!0},closeGameBoardRedactor:function(){this.isGameBoardRedactorOpen=!1},handleNewGame:function(){this.gameHasAwinner=!1,this.gameMenuOptions.resume.isDisabled=!1,this.hideGameMenu(),this.openGameBoardRedactor(),this.$refs.game.resetTheGame()},handleResumeGame:function(){this.hideGameMenu()},handleStartGame:function(e,t,a,r){this.closeGameBoardRedactor(),this.pl=me({board:e}),this.pc=me({board:a,isPc:!0}),this.$refs.game.initTheGame(t,r,this.pl,this.pc)},handleRound:function(e){var t=this;if(!this.gameHasAwinner){if(this.plHasDamaged=this.makePlTurn(e),this.$refs.game.updateTheBoardsInfo(),this.pc.getBoard().isAllShipsSunk())return this.gameHasAwinner=!0,this.gameMenuOptions.resume.isDisabled=!0,this.$refs.game.updateGameInfo("Congratulations you won The Game","rgb(43, 197, 87)"),void setTimeout(this.handleShowGameMenu,3e3);if(this.plHasDamaged)return;this.$refs.game.updateGameInfo("Pc Turn!","rgb(226, 54, 54)"),this.$refs.game.disablePcBoard();var a=function e(a){setTimeout((function(){if(t.pcHasDamaged=t.makePcTurn(),t.$refs.game.updateTheBoardsInfo(),t.pl.getBoard().isAllShipsSunk())return t.gameHasAwinner=!0,t.gameMenuOptions.resume.isDisabled=!0,t.$refs.game.updateGameInfo("Pc won The Game!","rgb(226, 54, 54)"),void setTimeout(t.handleShowGameMenu,3e3);t.pcHasDamaged?e(a):(t.$refs.game.updateGameInfo("Your Turn!","rgb(43, 197, 87)"),t.$refs.game.enablePcBoard())}),a)};a(500)}},makePlTurn:function(e){var t=JSON.parse(e),a=t.x,r=t.y,n=this.pl.attack({player:this.pc,x:a,y:r});return this.$refs.game.updatePcBoard(e,n),!0===n||n.damagedShipData},makePcTurn:function(){var e=this.pc.attack({player:this.pl}),t=e.attackInfo,a=e.cord,r=a.x,n=a.y;return this.$refs.game.updatePlBoard(JSON.stringify({x:r,y:n}),t),!0===t||t.damagedShipData}}},ge=xe,ve=(a("034f"),a("7496")),be=a("a75b"),Se=Object(l["a"])(ge,n,i,!1,null,null,null),Ce=Se.exports;h()(Se,{VApp:ve["a"],VContent:be["a"]});var Oe=a("f309");r["a"].use(Oe["a"]);var Be=new Oe["a"]({theme:{dark:!0}});r["a"].config.productionTip=!1,new r["a"]({vuetify:Be,render:function(e){return e(Ce)}}).$mount("#app")},"8a23":function(e,t,a){},a605:function(e,t,a){"use strict";var r=a("1e97"),n=a.n(r);n.a},ec1c:function(e,t,a){"use strict";var r=a("4a93"),n=a.n(r);n.a},f0e0:function(e,t,a){"use strict";var r=a("37eb"),n=a.n(r);n.a},fcfe:function(e,t,a){"use strict";var r=a("3993"),n=a.n(r);n.a}});
//# sourceMappingURL=app.8f0d5d6c.js.map